<div class="container">
  <h1>Search for Recipe or News Article</h1>

  <div class="search-bar">
    <input type="text" [(ngModel)]="url" placeholder="Enter URL" [disabled]="isLoading" />
    <button (click)="fetchContent()" [disabled]="isLoading">
      {{ isLoading ? 'Loading...' : 'Fetch Content' }}
    </button>
    <button (click)="clear()" [disabled]="isLoading">Clear</button>
  </div>

  <div *ngIf="isLoading" class="loading">
    <p>Scraping content, please wait...</p>
  </div>

  <div *ngIf="errorMessage && !isLoading" class="error">
    {{ errorMessage }}
  </div>

  <div *ngIf="response && response.type === 'recipe'" class="recipe-content">
    <h2>{{ response.data.recipeName }}</h2>
    <img *ngIf="response.data.recipeImage" [src]="response.data.recipeImage" alt="Recipe image" class="recipe-image" />
    <h3>Description</h3>
    <p>{{ response.data.description }}</p>
    <h3>Ingredients</h3>
    <ul>
      <li *ngFor="let ingredient of response.data.ingredients">{{ ingredient }}</li>
    </ul>
    <h3>Instructions</h3>
    <ol>
      <li *ngFor="let instruction of response.data.instructions">
        {{ instruction.text }}
        <img *ngIf="instruction.image" [src]="instruction.image" alt="Instruction image" class="instruction-image" />
      </li>
    </ol>
  </div>

  <div *ngIf="response && response.type === 'news'" class="news-content">
    <h2>{{ response.data.title }}</h2>
    <img *ngIf="response.data.image && response.data.image !== 'N/A'" [src]="response.data.image" alt="Article image" class="article-image" />
    <p><strong>Author:</strong> {{ response.data.author }}</p>
    <p>
      <strong>Published:</strong>
      {{ response.data.published.humanReadable !== 'N/A' ? response.data.published.humanReadable : 'Not available' }}
      (Epoch: {{ response.data.published.epoch || 'Not available' }})
    </p>
    <h3>Content</h3>
    <div *ngFor="let item of response.data.content">
      <ng-container *ngIf="item.type === 'paragraph'">
        <p>{{ item.text }}</p>
      </ng-container>
      <ng-container *ngIf="item.type === 'heading'">
        <h2>{{ item.text }}</h2>
      </ng-container>
      <ng-container *ngIf="item.type === 'div'">
        <div class="my-5">
          <ng-container *ngFor="let subItem of item.content">
            <ng-container *ngIf="subItem.type === 'text'">
              {{ subItem.value }}
            </ng-container>
            <ng-container *ngIf="subItem.type === 'link'">
              <a [href]="subItem.href" target="_blank" class="article-hover-class">{{ subItem.text }}</a>
            </ng-container>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>
</div>
